# Управление светодиодами и сенсорами через Telegram-бота на ESP8266

## Описание проекта
Этот проект использует микроконтроллер ESP8266 для управления светодиодами, дисплеем TM1637 и сенсором DHT11 через Telegram-бота. Основные функции включают отображение температуры и влажности на дисплее, изменение цвета светодиодов и автоматическую регулировку яркости.

## Компоненты

- ESP8266
- Светодиодная лента WS2812B
- Датчик DHT11
- Дисплей TM1637
- Telegram-бот

## Подключение

- `DIR` к порту D5
- `CLK` к порту D4
- `FOTO` к аналоговому входу A0
- `DHTPIN` к порту D5
- `LED_PIN_1` к порту D7

## Библиотеки

Используемые библиотеки:
- `Arduino.h`: Основные функции Arduino.
- `FastLED.h`: Управление светодиодами WS2812B.
- `ESP8266WiFi.h`: Подключение к WiFi.
- `WiFiClientSecure.h`: Безопасное подключение к интернету.
- `UniversalTelegramBot.h`: Управление Telegram-ботом.
- `DHT.h`: Работа с датчиком DHT11.
- `TM1637Display.h`: Управление дисплеем TM1637.

## Настройки

- Замените `WIFI_SSID` и `WIFI_PASSWORD` на ваши данные для подключения к WiFi.
- Замените `BOT_TOKEN` на токен вашего Telegram-бота.

## Команды Telegram-бота

- `/gettemperature` — Получить текущую температуру.
- `/gethumidity` — Получить текущую влажность.
- `/getbrightness` — Получить текущий уровень яркости.
- `/setautobrightness` — Включить/выключить автоматическую регулировку яркости.
- `/setcolorwhite` — Установить цвет светодиодов на белый.
- `/setcolorred` — Установить цвет светодиодов на красный.
- `/setcolorgreen` — Установить цвет светодиодов на зеленый.
- `/setcolorblue` — Установить цвет светодиодов на синий.
- `/setraindow` — Включить режим "Радуга".
- `/upbrightness` — Увеличить яркость на 10%.
- `/downbrightness` — Уменьшить яркость на 10%.

## Описание функций

### `void UpdateTMP()`

Обновляет значения температуры и влажности с датчика DHT11 и отображает их на дисплее TM1637.

### `void handleNewMessages(int numNewMessages)`

Обрабатывает новые сообщения, полученные от Telegram-бота, выполняя соответствующие действия в зависимости от команды.

### `void setup()`

Инициализация системы при запуске Arduino:
- Настройка последовательного порта.
- Инициализация дисплея TM1637 и установка максимальной яркости.
- Инициализация светодиодов WS2812B.
- Подключение к WiFi и установка времени через NTP.
- Начало работы с датчиком DHT11.

### `void loop()`

Основной цикл программы:
- Проверка наличия новых сообщений от Telegram-бота и их обработка.
- Обновление данных температуры и влажности.
- Вызов функции `UpdateFoto()` для обновления состояния системы.

### `void UpdateFoto()`

Обновление яркости и цвета светодиодной ленты в зависимости от фотодатчика и режима работы:
- Автоматическое или ручное управление яркостью.
- Управление цветом в режимах `static`, `rgb`, `rainbow`.

### Перечисления

#### `enum MODE`

Режимы работы светодиодной ленты:
- `TEMP_SET`: Отображение температуры.
- `RGB_SET`: Установка цвета.
- `RADUGA_MODE`: Режим "Радуга".

#### `enum DATA`

Типы данных для отображения:
- `HUM`: Влажность.
- `TEMP`: Температура.
- `BRIGHT`: Яркость.